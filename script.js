document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("main-content"),t=document.querySelectorAll('[id^="project"]'),a=document.querySelectorAll(".view-project-btn"),l=document.querySelectorAll(".back-to-main"),i=document.getElementById("mobile-nav"),s=(a,l=!1)=>{window.scrollTo(0,0),e.classList.remove("active"),t.forEach(e=>e.classList.remove("active"));let s="";if("main-content"!==a&&a){let n=document.getElementById(a);n?(n.classList.add("active"),i.classList.add("hidden"),s="#"+a):(e.classList.add("active"),i.classList.remove("hidden"),a="main-content")}else e.classList.add("active"),i.classList.remove("hidden"),a="main-content";l||s&&history.pushState({page:a},"",s)},n=window.location.hash;if(n&&n.startsWith("#project")){let c=n.substring(1);s(c),history.replaceState({page:c},"",n)}else s("main-content"),history.replaceState({page:"main-content"},"",n||" ");a.forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.page;s(t)})}),l.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let a=e.getAttribute("href");s("main-content"),history.pushState({page:"main-content"},"",a),a&&a.startsWith("#")&&setTimeout(()=>{let e=document.querySelector(a);e&&e.scrollIntoView({behavior:"smooth"})},0)})}),window.addEventListener("popstate",e=>{e.state&&e.state.page?s(e.state.page,!0):s("main-content",!0)});let o=document.querySelectorAll("#main-content section"),r=document.querySelectorAll(".nav-link"),d=document.querySelectorAll(".nav-mobile-link"),v=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let t=e.target.id;r.forEach(e=>{e.classList.toggle("active-nav",e.getAttribute("href").substring(1)===t)}),d.forEach(e=>{e.classList.toggle("active-icon",e.getAttribute("href").substring(1)===t)})}})},{root:null,rootMargin:"0px",threshold:.4});o.forEach(e=>{e.id&&v.observe(e)});let h=document.querySelectorAll(".filter-btn"),g=document.querySelectorAll(".portfolio-item");h.forEach(e=>{e.addEventListener("click",()=>{h.forEach(e=>e.classList.remove("active")),e.classList.add("active");let t=e.dataset.filter;g.forEach(e=>{e.style.display="none","all"!==t&&e.dataset.category!==t||(e.style.display="block")})})})});
